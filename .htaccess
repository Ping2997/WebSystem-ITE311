DirectoryIndex public/index.php
RewriteEngine On
RewriteBase /WebSystem-ITE311/

# Block direct GET access to selected pages unless a gate token is present
RewriteCond %{REQUEST_METHOD} =GET
RewriteCond %{QUERY_STRING} !(^|&)gate= [NC]
RewriteRule ^(login|register|about|contact)/?$ /WebSystem-ITE311/ [R=302,L]
RewriteRule ^index\.php/(login|register|about|contact)/?$ /WebSystem-ITE311/ [R=302,L]

RewriteCond %{REQUEST_FILENAME} !-f
RewriteCond %{REQUEST_FILENAME} !-d
RewriteRule ^(.*)$ public/index.php/$1 [L]
